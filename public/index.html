<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema RRHH - Empresas Hort√≠colas</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Pantalla de Login -->
    <div id="login-screen" class="screen active">
        <div class="container">
            <div class="card">
                <h1>üå± Sistema RRHH</h1>
                <p class="subtitle">Empresas Hort√≠colas</p>
                <form id="login-form">
                    <div class="form-group">
                        <label for="usuario">Usuario:</label>
                        <input type="text" id="usuario" name="usuario" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Contrase√±a:</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Ingresar</button>
                    <div class="login-hints">
                        <p class="hint"><strong>üë§ Usuarios de prueba:</strong></p>
                        <p class="hint">üî¥ Super Admin: <code>admin</code> / <code>admin123</code></p>
                        <p class="hint">üü† Admin RRHH: <code>rrhh</code> / <code>rrhh123</code></p>
                        <p class="hint">üü¢ Gerente: <code>manager</code> / <code>manager123</code></p>
                        <p class="hint">üîµ Consultor: <code>viewer</code> / <code>viewer123</code></p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Pantalla Principal -->
    <div id="main-screen" class="screen">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-seedling"></i>
                <h3>RRHH Pro</h3>
            </div>
            <nav class="sidebar-nav">
                <button class="nav-item active" data-tab="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </button>
                <button class="nav-item" data-tab="lista">
                    <i class="fas fa-users"></i>
                    <span>Personal</span>
                </button>
                <button class="nav-item" data-tab="nuevo">
                    <i class="fas fa-user-plus"></i>
                    <span>Nuevo Empleado</span>
                </button>
                <button class="nav-item" data-tab="tickets">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Tickets</span>
                </button>
                <button class="nav-item" data-tab="reportes">
                    <i class="fas fa-file-pdf"></i>
                    <span>Reportes</span>
                </button>
                <button class="nav-item" data-tab="alertas">
                    <i class="fas fa-bell"></i>
                    <span>Alertas</span>
                    <span id="notif-badge" class="notif-badge" style="display:none;">0</span>
                </button>
            </nav>
            <div class="sidebar-footer">
                <div class="user-info">
                    <i class="fas fa-user-circle"></i>
                    <div>
                        <div id="sidebar-user-name">Usuario</div>
                        <small>Administrador</small>
                    </div>
                </div>
                <button id="sidebar-logout-btn" class="btn-logout">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </aside>

        <!-- Toast Container -->
        <div id="toast-container"></div>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <h1 id="page-title"><i class="fas fa-chart-line"></i> Dashboard</h1>
                <div class="top-bar-actions">
                    <span id="role-badge" class="role-badge" style="display: none;">
                        <i class="fas fa-shield-alt"></i>
                        <span id="role-text">Usuario</span>
                    </span>
                    <button class="btn-icon" title="Refrescar">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button class="btn-icon" title="Ayuda">
                        <i class="fas fa-question-circle"></i>
                    </button>
                </div>
            </header>

            <!-- Tab: Dashboard -->
            <div id="tab-dashboard" class="tab-content active">
                <!-- KPIs -->
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-icon" style="background: #2196f3;">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="kpi-info">
                            <h3 id="kpi-total">0</h3>
                            <p>Total Empleados</p>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon" style="background: #ff9800;">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="kpi-info">
                            <h3 id="kpi-extranjeros">0</h3>
                            <p>Extranjeros</p>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon" style="background: #f44336;">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="kpi-info">
                            <h3 id="kpi-antecedentes">0</h3>
                            <p>Con Antecedentes</p>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon" style="background: #9c27b0;">
                            <i class="fas fa-child"></i>
                        </div>
                        <div class="kpi-info">
                            <h3 id="kpi-menores">0</h3>
                            <p>Menores en Familias</p>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon" style="background: #e91e63;">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <div class="kpi-info">
                            <h3 id="kpi-salud">0</h3>
                            <p>Con Problemas de Salud</p>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon" style="background: #00bcd4;">
                            <i class="fas fa-plane"></i>
                        </div>
                        <div class="kpi-info">
                            <h3 id="kpi-viaje">0</h3>
                            <p>De Viaje/Ausentes</p>
                        </div>
                    </div>
                </div>

                <!-- KPIs Avanzados -->
                <div class="advanced-kpis">
                    <h3 class="section-title"><i class="fas fa-chart-bar"></i> M√©tricas Avanzadas</h3>
                    <div class="kpi-grid-advanced">
                        <div class="kpi-advanced">
                            <i class="fas fa-birthday-cake"></i>
                            <div>
                                <h4 id="kpi-edad-promedio">0</h4>
                                <p>Edad Promedio</p>
                            </div>
                        </div>
                        <div class="kpi-advanced">
                            <i class="fas fa-calendar-check"></i>
                            <div>
                                <h4 id="kpi-antiguedad-promedio">0</h4>
                                <p>Antig√ºedad Promedio</p>
                            </div>
                        </div>
                        <div class="kpi-advanced">
                            <i class="fas fa-dollar-sign"></i>
                            <div>
                                <h4 id="kpi-salario-promedio">$0</h4>
                                <p>Salario Promedio</p>
                            </div>
                        </div>
                        <div class="kpi-advanced">
                            <i class="fas fa-money-bill-wave"></i>
                            <div>
                                <h4 id="kpi-costo-total">$0</h4>
                                <p>Costo Laboral Total</p>
                            </div>
                        </div>
                        <div class="kpi-advanced">
                            <i class="fas fa-users-cog"></i>
                            <div>
                                <h4 id="kpi-area-mayor">-</h4>
                                <p>√Årea con M√°s Personal</p>
                            </div>
                        </div>
                        <div class="kpi-advanced">
                            <i class="fas fa-user-graduate"></i>
                            <div>
                                <h4 id="kpi-educacion-alta">0%</h4>
                                <p>Con Estudios Superiores</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gr√°ficos -->
                <div class="charts-grid">
                    <div class="chart-card">
                        <h3><i class="fas fa-flag"></i> Distribuci√≥n por Nacionalidad</h3>
                        <canvas id="chart-nacionalidad"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3><i class="fas fa-graduation-cap"></i> Nivel Educativo</h3>
                        <canvas id="chart-educacion"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3><i class="fas fa-id-card"></i> Tipos de Residencia</h3>
                        <canvas id="chart-residencia"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3><i class="fas fa-chart-bar"></i> Distribuci√≥n por Edad</h3>
                        <canvas id="chart-edad"></canvas>
                    </div>
                </div>

                <!-- Tabla de Alertas R√°pidas -->
                <div class="card">
                    <h3><i class="fas fa-exclamation-circle"></i> Alertas Prioritarias</h3>
                    <div id="alertas-dashboard" class="alertas-list"></div>
                </div>
            </div>

            <!-- Tab: Lista de Empleados -->
            <div id="tab-lista" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-users"></i> Personal Registrado</h3>
                        <div class="header-actions">
                            <button class="btn btn-secondary" onclick="toggleAdvancedSearch()">
                                <i class="fas fa-filter"></i> B√∫squeda Avanzada
                            </button>
                            <button class="btn btn-primary" onclick="exportarExcel()">
                                <i class="fas fa-file-excel"></i> Exportar
                            </button>
                        </div>
                    </div>
                    
                    <!-- B√∫squeda Simple -->
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search-input" placeholder="B√∫squeda r√°pida: nombre, CUIL, documento, puesto..." />
                        <button class="btn-clear" onclick="clearSearch()" title="Limpiar b√∫squeda">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <!-- B√∫squeda Avanzada (Tipo SAP/Workday) -->
                    <div id="advanced-search" class="advanced-search" style="display: none;">
                        <h4><i class="fas fa-sliders-h"></i> Filtros Avanzados</h4>
                        <div class="filters-grid">
                            <div class="filter-group">
                                <label><i class="fas fa-briefcase"></i> Puesto</label>
                                <select id="filter-puesto" onchange="applyAdvancedFilters()">
                                    <option value="">Todos los puestos</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label><i class="fas fa-building"></i> √Årea</label>
                                <select id="filter-area" onchange="applyAdvancedFilters()">
                                    <option value="">Todas las √°reas</option>
                                    <option value="Producci√≥n">Producci√≥n</option>
                                    <option value="Administraci√≥n">Administraci√≥n</option>
                                    <option value="Ventas">Ventas</option>
                                    <option value="Log√≠stica">Log√≠stica</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label><i class="fas fa-globe"></i> Nacionalidad</label>
                                <select id="filter-nacionalidad" onchange="applyAdvancedFilters()">
                                    <option value="">Todas</option>
                                    <option value="Argentina">Argentina</option>
                                    <option value="Bolivia">Bolivia</option>
                                    <option value="Paraguay">Paraguay</option>
                                    <option value="Per√∫">Per√∫</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label><i class="fas fa-graduation-cap"></i> Nivel Educativo</label>
                                <select id="filter-educacion" onchange="applyAdvancedFilters()">
                                    <option value="">Todos los niveles</option>
                                    <option value="Primario">Primario</option>
                                    <option value="Secundario">Secundario</option>
                                    <option value="Terciario">Terciario</option>
                                    <option value="Universitario">Universitario</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label><i class="fas fa-heart"></i> Estado de Salud</label>
                                <select id="filter-salud" onchange="applyAdvancedFilters()">
                                    <option value="">Todos</option>
                                    <option value="sin-problemas">Sin problemas</option>
                                    <option value="con-problemas">Con problemas de salud</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label><i class="fas fa-toggle-on"></i> Estado Laboral</label>
                                <select id="filter-estado" onchange="applyAdvancedFilters()">
                                    <option value="">Todos</option>
                                    <option value="activo">Activos</option>
                                    <option value="inactivo">Inactivos</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label><i class="fas fa-dollar-sign"></i> Rango de Salario</label>
                                <select id="filter-salario" onchange="applyAdvancedFilters()">
                                    <option value="">Todos</option>
                                    <option value="0-50000">Hasta $50,000</option>
                                    <option value="50000-100000">$50,000 - $100,000</option>
                                    <option value="100000-150000">$100,000 - $150,000</option>
                                    <option value="150000-200000">$150,000 - $200,000</option>
                                    <option value="200000+">M√°s de $200,000</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label><i class="fas fa-exclamation-triangle"></i> Antecedentes</label>
                                <select id="filter-antecedentes" onchange="applyAdvancedFilters()">
                                    <option value="">Todos</option>
                                    <option value="si">Con antecedentes</option>
                                    <option value="no">Sin antecedentes</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label><i class="fas fa-calendar"></i> Rango de Edad</label>
                                <div class="range-inputs">
                                    <input type="number" id="filter-edad-min" placeholder="Desde" min="18" max="99" onchange="applyAdvancedFilters()">
                                    <span>-</span>
                                    <input type="number" id="filter-edad-max" placeholder="Hasta" min="18" max="99" onchange="applyAdvancedFilters()">
                                </div>
                            </div>
                            <div class="filter-group">
                                <label><i class="fas fa-clock"></i> Antig√ºedad</label>
                                <select id="filter-antiguedad" onchange="applyAdvancedFilters()">
                                    <option value="">Todas</option>
                                    <option value="0-1">Menos de 1 a√±o</option>
                                    <option value="1-3">1 a 3 a√±os</option>
                                    <option value="3-5">3 a 5 a√±os</option>
                                    <option value="5+">M√°s de 5 a√±os</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label><i class="fas fa-users"></i> Con Familia</label>
                                <select id="filter-familia" onchange="applyAdvancedFilters()">
                                    <option value="">Todos</option>
                                    <option value="si">Con familiares a cargo</option>
                                    <option value="no">Sin familiares</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label><i class="fas fa-file-alt"></i> Estado de Documentos</label>
                                <select id="filter-documentos" onchange="applyAdvancedFilters()">
                                    <option value="">Todos</option>
                                    <option value="vigentes">Todos vigentes</option>
                                    <option value="por-vencer">Por vencer (30 d√≠as)</option>
                                    <option value="vencidos">Con documentos vencidos</option>
                                </select>
                            </div>
                        </div>
                        <div class="filters-actions">
                            <button class="btn btn-primary" onclick="applyAdvancedFilters()">
                                <i class="fas fa-filter"></i> Aplicar Filtros
                            </button>
                            <button class="btn btn-secondary" onclick="clearAllFilters()">
                                <i class="fas fa-eraser"></i> Limpiar Todo
                            </button>
                            <div class="filter-results" id="filter-results"></div>
                        </div>
                    </div>
                    
                    <!-- Filtros Activos -->
                    <div id="active-filters" class="active-filters" style="display: none;"></div>
                    
                    <!-- Controles de Ordenamiento -->
                    <div class="sort-controls">
                        <label><i class="fas fa-sort"></i> Ordenar por:</label>
                        <select id="sort-select" onchange="aplicarOrdenamiento()">
                            <option value="">Sin ordenar</option>
                            <option value="nombre-asc">Nombre (A-Z)</option>
                            <option value="nombre-desc">Nombre (Z-A)</option>
                            <option value="fecha-asc">Fecha Ingreso (M√°s antiguo)</option>
                            <option value="fecha-desc">Fecha Ingreso (M√°s reciente)</option>
                            <option value="salario-asc">Salario (Menor a Mayor)</option>
                            <option value="salario-desc">Salario (Mayor a Menor)</option>
                            <option value="area-asc">√Årea (A-Z)</option>
                            <option value="area-desc">√Årea (Z-A)</option>
                            <option value="edad-asc">Edad (Menor a Mayor)</option>
                            <option value="edad-desc">Edad (Mayor a Menor)</option>
                        </select>
                    </div>
                    
                    <div id="empleados-list" class="empleados-list">
                        <p class="loading">Cargando empleados...</p>
                    </div>
                </div>
            </div>

            <!-- Tab: Nuevo Empleado -->
            <div id="tab-nuevo" class="tab-content">
                <div class="card">
                    <h3><i class="fas fa-user-plus"></i> Registrar Nuevo Empleado</h3>
                    <form id="empleado-form">
                        <!-- DATOS PERSONALES -->
                        <fieldset>
                            <legend>üìã Datos Personales</legend>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="nombreCompleto">Nombre Completo *</label>
                                    <input type="text" id="nombreCompleto" required>
                                </div>
                                <div class="form-group">
                                    <label for="cuil">CUIL *</label>
                                    <input type="text" id="cuil" required placeholder="20-12345678-9">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="fechaNacimiento">Fecha de Nacimiento *</label>
                                    <input type="date" id="fechaNacimiento" required>
                                </div>
                                <div class="form-group">
                                    <label for="documento">Documento</label>
                                    <input type="text" id="documento">
                                </div>
                            </div>
                        </fieldset>

                        <!-- COMPOSICI√ìN FAMILIAR -->
                        <fieldset>
                            <legend>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Composici√≥n Familiar</legend>
                            <div class="form-group">
                                <label for="estadoCivil">Estado Civil</label>
                                <select id="estadoCivil">
                                    <option value="">Seleccionar...</option>
                                    <option value="soltero">Soltero/a</option>
                                    <option value="casado">Casado/a</option>
                                    <option value="divorciado">Divorciado/a</option>
                                    <option value="viudo">Viudo/a</option>
                                    <option value="union">Uni√≥n de hecho</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="integracionFamiliar">Integraci√≥n Familiar (ej: c√≥nyuge, 2 hijos)</label>
                                <textarea id="integracionFamiliar" rows="3" placeholder="Describe la composici√≥n familiar..."></textarea>
                            </div>
                            <div class="form-group">
                                <label for="escolaridadFamiliar">Escolaridad Familiar</label>
                                <textarea id="escolaridadFamiliar" rows="3" placeholder="Nivel educativo de los integrantes..."></textarea>
                            </div>
                        </fieldset>

                        <!-- EDUCACI√ìN -->
                        <fieldset>
                            <legend>üéì Educaci√≥n</legend>
                            <div class="form-group">
                                <label for="nivelEducativo">Nivel Educativo</label>
                                <select id="nivelEducativo">
                                    <option value="">Seleccionar...</option>
                                    <option value="sin_estudios">Sin estudios</option>
                                    <option value="primario_incompleto">Primario incompleto</option>
                                    <option value="primario_completo">Primario completo</option>
                                    <option value="secundario_incompleto">Secundario incompleto</option>
                                    <option value="secundario_completo">Secundario completo</option>
                                    <option value="terciario">Terciario</option>
                                    <option value="universitario">Universitario</option>
                                </select>
                            </div>
                        </fieldset>

                        <!-- SALUD -->
                        <fieldset>
                            <legend>üè• Salud</legend>
                            <div class="form-group">
                                <label for="problemasSalud">Problemas de Salud / Observaciones</label>
                                <textarea id="problemasSalud" rows="3" placeholder="Alergias, enfermedades cr√≥nicas, discapacidades..."></textarea>
                            </div>
                        </fieldset>

                        <!-- DATOS MIGRATORIOS -->
                        <fieldset>
                            <legend>üåç Datos Migratorios</legend>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="esExtranjero">¬øEs extranjero?</label>
                                    <select id="esExtranjero">
                                        <option value="no">No</option>
                                        <option value="si">S√≠</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="paisOrigen">Pa√≠s de Origen</label>
                                    <input type="text" id="paisOrigen">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="fechaEntradaPais">Fecha de Entrada al Pa√≠s</label>
                                    <input type="date" id="fechaEntradaPais">
                                </div>
                                <div class="form-group">
                                    <label for="tipoResidencia">Tipo de Residencia</label>
                                    <select id="tipoResidencia">
                                        <option value="">Seleccionar...</option>
                                        <option value="argentino">Argentino</option>
                                        <option value="permanente">Residencia Permanente</option>
                                        <option value="temporaria">Residencia Temporaria</option>
                                        <option value="precaria">Precaria</option>
                                        <option value="turista">Turista</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="entradasSalidasPais">Registro de Entradas/Salidas del Pa√≠s</label>
                                <textarea id="entradasSalidasPais" rows="3" placeholder="Fechas de viajes, vacaciones fuera del pa√≠s..."></textarea>
                            </div>
                        </fieldset>

                        <!-- EXPERIENCIA LABORAL -->
                        <fieldset>
                            <legend>üíº Experiencia Laboral</legend>
                            <div class="form-group">
                                <label for="experienciaLaboral">Experiencia Laboral Previa</label>
                                <textarea id="experienciaLaboral" rows="4" placeholder="Empresas donde trabaj√≥, puestos, per√≠odos..."></textarea>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="fechaIngreso">Fecha de Ingreso a la Empresa *</label>
                                    <input type="date" id="fechaIngreso" required>
                                </div>
                                <div class="form-group">
                                    <label for="puesto">Puesto Actual</label>
                                    <input type="text" id="puesto">
                                </div>
                            </div>
                        </fieldset>

                        <!-- ANTECEDENTES -->
                        <fieldset>
                            <legend>üìú Antecedentes</legend>
                            <div class="form-group">
                                <label for="antecedentesPenales">Antecedentes Penales</label>
                                <select id="antecedentesPenales">
                                    <option value="no">No tiene</option>
                                    <option value="si">S√≠ tiene</option>
                                    <option value="pendiente">Pendiente de verificaci√≥n</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="observacionesAntecedentes">Observaciones sobre Antecedentes</label>
                                <textarea id="observacionesAntecedentes" rows="2"></textarea>
                            </div>
                        </fieldset>

                        <!-- OBSERVACIONES GENERALES -->
                        <fieldset>
                            <legend>üìù Observaciones Generales</legend>
                            <div class="form-group">
                                <label for="observaciones">Notas adicionales</label>
                                <textarea id="observaciones" rows="3" placeholder="Cualquier informaci√≥n adicional relevante..."></textarea>
                            </div>
                        </fieldset>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">üíæ Guardar Empleado</button>
                            <button type="button" class="btn btn-secondary" onclick="resetForm()">üîÑ Limpiar</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Tab: Tickets -->
            <div id="tab-tickets" class="tab-content">
                <div class="card">
                    <h3><i class="fas fa-clipboard-list"></i> Tickets y Notificaciones</h3>
                    <div id="tickets-list" class="tickets-list">
                        <p class="loading">Cargando tickets...</p>
                    </div>
                </div>
            </div>

            <!-- Tab: Reportes -->
            <div id="tab-reportes" class="tab-content">
                <div class="reports-header">
                    <h2><i class="fas fa-file-alt"></i> Centro de Reportes</h2>
                    <div class="reports-header-actions">
                        <button class="btn btn-success" onclick="exportarAExcelMejorado()">
                            <i class="fas fa-file-excel"></i> Exportar Excel Completo
                        </button>
                        <button class="btn btn-primary" onclick="exportarAPDF()">
                            <i class="fas fa-file-pdf"></i> Exportar PDF
                        </button>
                        <button class="btn btn-warning" onclick="exportarBackup()">
                            <i class="fas fa-download"></i> Backup Completo
                        </button>
                        <button class="btn btn-secondary" onclick="document.getElementById('import-file').click()">
                            <i class="fas fa-upload"></i> Importar Datos
                        </button>
                        <input type="file" id="import-file" accept=".json" style="display: none;" onchange="importarBackup(event)">
                    </div>
                </div>
                
                <div class="reports-grid">
                    <div class="report-card" onclick="generarReporte('general')">
                        <i class="fas fa-file-alt"></i>
                        <h4>Reporte General</h4>
                        <p>Todos los empleados con informaci√≥n completa</p>
                    </div>
                    <div class="report-card" onclick="generarReporte('extranjeros')">
                        <i class="fas fa-globe"></i>
                        <h4>Personal Extranjero</h4>
                        <p>Listado de empleados extranjeros y sus residencias</p>
                    </div>
                    <div class="report-card" onclick="generarReporte('antecedentes')">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h4>Con Antecedentes</h4>
                        <p>Empleados con antecedentes penales</p>
                    </div>
                    <div class="report-card" onclick="generarReporte('salud')">
                        <i class="fas fa-heartbeat"></i>
                        <h4>Problemas de Salud</h4>
                        <p>Personal con condiciones de salud registradas</p>
                    </div>
                    <div class="report-card" onclick="generarReporte('familias')">
                        <i class="fas fa-child"></i>
                        <h4>Composici√≥n Familiar</h4>
                        <p>An√°lisis demogr√°fico de familias y menores</p>
                    </div>
                    <div class="report-card" onclick="generarReporte('educacion')">
                        <i class="fas fa-graduation-cap"></i>
                        <h4>Nivel Educativo</h4>
                        <p>Estad√≠sticas de educaci√≥n del personal</p>
                    </div>
                </div>
            </div>

            <!-- Tab: Alertas -->
            <div id="tab-alertas" class="tab-content">
                <div class="card">
                    <h3><i class="fas fa-bell"></i> Alertas y Notificaciones</h3>
                    <div class="alertas-tabs">
                        <button class="alerta-tab-btn active" data-alerta="todas">Todas</button>
                        <button class="alerta-tab-btn" data-alerta="criticas">Cr√≠ticas</button>
                        <button class="alerta-tab-btn" data-alerta="migratorio">Migratorio</button>
                        <button class="alerta-tab-btn" data-alerta="salud">Salud</button>
                    </div>
                    <div id="alertas-list" class="alertas-list"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal: Ver Perfil Completo del Empleado -->
    <div id="modal-perfil" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <div id="perfil-content"></div>
        </div>
    </div>

    <!-- Modal: Crear Ticket -->
    <div id="modal-ticket" class="modal">
        <div class="modal-content">
            <span class="modal-close-ticket">&times;</span>
            <h3>üìã Crear Ticket/Notificaci√≥n</h3>
            <form id="ticket-form">
                <input type="hidden" id="ticket-empleadoId">
                <div class="form-group">
                    <label for="ticket-tipo">Tipo de Notificaci√≥n *</label>
                    <select id="ticket-tipo" required>
                        <option value="">Seleccionar...</option>
                        <option value="inspeccion">üîç Inspecci√≥n</option>
                        <option value="vacaciones">üèñÔ∏è Vacaciones</option>
                        <option value="ausencia">‚ùå Ausencia sin registro</option>
                        <option value="asistencia_social">ü§ù Asistencia Social</option>
                        <option value="salud">üè• Problema de Salud</option>
                        <option value="migratorio">üåç Tr√°mite Migratorio</option>
                        <option value="otro">üìù Otro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="ticket-descripcion">Descripci√≥n *</label>
                    <textarea id="ticket-descripcion" rows="4" required placeholder="Describe el evento o situaci√≥n..."></textarea>
                </div>
                <div class="form-group">
                    <label for="ticket-fecha">Fecha del Evento</label>
                    <input type="date" id="ticket-fecha">
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">üíæ Crear Ticket</button>
                    <button type="button" class="btn btn-secondary" onclick="closeTicketModal()">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- jsPDF Libraries for PDF Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
    <!-- SheetJS for Excel Export -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
